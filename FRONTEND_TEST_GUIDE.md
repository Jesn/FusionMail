# FusionMail 前端功能测试指南

## 测试准备

### 1. 启动服务

```bash
# 启动后端服务
cd backend
go run cmd/server/main.go

# 启动前端服务（新终端）
cd frontend
npm run dev
```

### 2. 访问应用

打开浏览器访问：http://localhost:3000

## 前端功能测试清单

### 一、首页和导航

#### 1.1 页面加载
- [ ] 打开 http://localhost:3000
- [ ] 页面正常加载，无白屏
- [ ] 浏览器控制台无错误
- [ ] 网络请求正常（检查 Network 标签）

#### 1.2 导航栏
- [ ] 导航栏显示正常
- [ ] Logo 显示正确
- [ ] 菜单项显示完整
- [ ] 点击菜单项可以切换页面

#### 1.3 侧边栏
- [ ] 侧边栏显示正常
- [ ] 邮箱列表显示
- [ ] 文件夹列表显示
- [ ] 展开/收起功能正常

### 二、账户管理页面

访问路径：`/accounts` 或点击"账户管理"菜单

#### 2.1 账户列表
- [ ] 页面正常加载
- [ ] 显示"暂无账户"提示（初始状态）
- [ ] "添加账户"按钮显示

#### 2.2 添加账户对话框
- [ ] 点击"添加账户"按钮
- [ ] 对话框正常弹出
- [ ] 表单字段显示完整：
  - [ ] 邮箱地址输入框
  - [ ] 邮箱类型选择（Gmail/Outlook/IMAP/POP3）
  - [ ] 认证方式选择
  - [ ] 密码/授权码输入框
  - [ ] 服务器配置（IMAP/POP3）

#### 2.3 表单验证
- [ ] 邮箱格式验证
- [ ] 必填字段验证
- [ ] 错误提示显示正确
- [ ] 验证通过后可以提交

#### 2.4 测试连接
- [ ] "测试连接"按钮可点击
- [ ] 显示加载状态
- [ ] 连接成功显示提示
- [ ] 连接失败显示错误信息

#### 2.5 保存账户
- [ ] "保存"按钮可点击
- [ ] 显示加载状态
- [ ] 保存成功显示提示
- [ ] 对话框自动关闭
- [ ] 账户列表自动刷新

#### 2.6 账户卡片
- [ ] 账户卡片显示正确信息：
  - [ ] 邮箱地址
  - [ ] 邮箱类型图标
  - [ ] 同步状态
  - [ ] 邮件统计
- [ ] 操作按钮显示：
  - [ ] 编辑按钮
  - [ ] 删除按钮
  - [ ] 同步按钮

#### 2.7 编辑账户
- [ ] 点击编辑按钮
- [ ] 对话框显示现有信息
- [ ] 修改信息
- [ ] 保存成功
- [ ] 信息更新正确

#### 2.8 删除账户
- [ ] 点击删除按钮
- [ ] 显示确认对话框
- [ ] 确认删除
- [ ] 账户被移除
- [ ] 列表自动更新

### 三、邮件列表页面

访问路径：`/inbox` 或点击"收件箱"菜单

#### 3.1 邮件列表
- [ ] 页面正常加载
- [ ] 显示"暂无邮件"提示（初始状态）
- [ ] 工具栏显示正常

#### 3.2 工具栏功能
- [ ] 刷新按钮
- [ ] 搜索框
- [ ] 筛选按钮
- [ ] 排序选项
- [ ] 视图切换（列表/卡片）

#### 3.3 邮件项显示
添加测试账户并同步邮件后测试：
- [ ] 发件人名称/邮箱
- [ ] 邮件主题
- [ ] 邮件预览
- [ ] 发送时间
- [ ] 未读标记
- [ ] 星标标记
- [ ] 附件图标

#### 3.4 邮件操作
- [ ] 点击邮件打开详情
- [ ] 勾选邮件显示批量操作
- [ ] 标记已读/未读
- [ ] 添加/移除星标
- [ ] 归档邮件
- [ ] 删除邮件

#### 3.5 分页功能
- [ ] 分页器显示
- [ ] 上一页/下一页按钮
- [ ] 页码跳转
- [ ] 每页数量选择

#### 3.6 虚拟滚动
- [ ] 滚动流畅
- [ ] 无卡顿
- [ ] 邮件正确加载

### 四、邮件详情页面

#### 4.1 邮件头部
- [ ] 发件人信息完整
- [ ] 收件人信息完整
- [ ] 抄送/密送信息（如有）
- [ ] 发送时间
- [ ] 主题显示

#### 4.2 邮件内容
- [ ] 邮件正文正确显示
- [ ] HTML 邮件渲染正确
- [ ] 纯文本邮件显示正确
- [ ] 图片正常加载
- [ ] 链接可点击

#### 4.3 附件列表
- [ ] 附件列表显示
- [ ] 附件名称和大小
- [ ] 下载按钮
- [ ] 预览功能（如支持）

#### 4.4 操作按钮
- [ ] 回复按钮（未实现提示）
- [ ] 转发按钮（未实现提示）
- [ ] 标记已读/未读
- [ ] 添加/移除星标
- [ ] 归档按钮
- [ ] 删除按钮

#### 4.5 返回列表
- [ ] 返回按钮
- [ ] 返回后列表状态保持

### 五、搜索功能

#### 5.1 搜索框
- [ ] 搜索框显示
- [ ] 输入关键词
- [ ] 实时搜索提示
- [ ] 搜索历史（如有）

#### 5.2 搜索结果
- [ ] 搜索结果正确
- [ ] 关键词高亮
- [ ] 结果数量显示
- [ ] 无结果提示

#### 5.3 高级搜索
- [ ] 高级搜索按钮
- [ ] 筛选条件：
  - [ ] 发件人
  - [ ] 收件人
  - [ ] 主题
  - [ ] 日期范围
  - [ ] 是否已读
  - [ ] 是否有附件
- [ ] 应用筛选
- [ ] 清除筛选

### 六、规则管理页面

访问路径：`/rules` 或点击"规则管理"菜单

#### 6.1 规则列表
- [ ] 页面正常加载
- [ ] 显示"暂无规则"提示（初始状态）
- [ ] "创建规则"按钮显示

#### 6.2 创建规则对话框
- [ ] 点击"创建规则"按钮
- [ ] 对话框正常弹出
- [ ] 表单字段显示：
  - [ ] 规则名称
  - [ ] 规则描述
  - [ ] 优先级
  - [ ] 触发条件
  - [ ] 执行动作

#### 6.3 触发条件配置
- [ ] 条件类型选择：
  - [ ] 发件人包含
  - [ ] 主题包含
  - [ ] 正文包含
  - [ ] 有附件
- [ ] 添加多个条件
- [ ] 条件逻辑（AND/OR）
- [ ] 删除条件

#### 6.4 执行动作配置
- [ ] 动作类型选择：
  - [ ] 标记为已读
  - [ ] 添加标签
  - [ ] 归档
  - [ ] 触发 Webhook
- [ ] 添加多个动作
- [ ] 删除动作

#### 6.5 保存规则
- [ ] "保存"按钮可点击
- [ ] 保存成功提示
- [ ] 规则列表更新

#### 6.6 规则卡片
- [ ] 规则名称和描述
- [ ] 优先级显示
- [ ] 启用/禁用状态
- [ ] 操作按钮：
  - [ ] 编辑
  - [ ] 测试
  - [ ] 删除
  - [ ] 启用/禁用切换

#### 6.7 测试规则
- [ ] 点击"测试"按钮
- [ ] 选择测试邮件
- [ ] 显示测试结果
- [ ] 匹配/不匹配提示

#### 6.8 编辑规则
- [ ] 点击编辑按钮
- [ ] 显示现有配置
- [ ] 修改配置
- [ ] 保存成功

#### 6.9 删除规则
- [ ] 点击删除按钮
- [ ] 确认对话框
- [ ] 删除成功
- [ ] 列表更新

### 七、Webhook 管理页面

访问路径：`/webhooks` 或点击"Webhook"菜单

#### 7.1 Webhook 列表
- [ ] 页面正常加载
- [ ] 显示"暂无 Webhook"提示
- [ ] "添加 Webhook"按钮

#### 7.2 添加 Webhook
- [ ] 点击"添加"按钮
- [ ] 对话框显示
- [ ] 表单字段：
  - [ ] Webhook 名称
  - [ ] URL 地址
  - [ ] 触发事件
  - [ ] 请求方法
  - [ ] 请求头
  - [ ] 认证配置

#### 7.3 Webhook 卡片
- [ ] 名称和 URL
- [ ] 状态显示
- [ ] 操作按钮：
  - [ ] 编辑
  - [ ] 测试
  - [ ] 查看日志
  - [ ] 删除

#### 7.4 测试 Webhook
- [ ] 点击"测试"按钮
- [ ] 发送测试请求
- [ ] 显示响应结果
- [ ] 成功/失败提示

#### 7.5 Webhook 日志
- [ ] 点击"查看日志"
- [ ] 日志列表显示
- [ ] 请求详情
- [ ] 响应详情
- [ ] 时间戳

### 八、设置页面

访问路径：`/settings` 或点击"设置"菜单

#### 8.1 通用设置
- [ ] 语言选择
- [ ] 时区选择
- [ ] 主题切换（浅色/深色）
- [ ] 保存设置

#### 8.2 同步设置
- [ ] 同步间隔配置
- [ ] 自动同步开关
- [ ] 同步范围设置

#### 8.3 通知设置
- [ ] 桌面通知开关
- [ ] 声音提示开关
- [ ] 通知规则配置

### 九、响应式设计测试

#### 9.1 桌面端（1920x1080）
- [ ] 布局正常
- [ ] 所有功能可用
- [ ] 无横向滚动条

#### 9.2 平板端（768x1024）
- [ ] 布局自适应
- [ ] 侧边栏可收起
- [ ] 触摸操作友好

#### 9.3 移动端（375x667）
- [ ] 布局紧凑
- [ ] 导航栏适配
- [ ] 操作按钮大小合适

### 十、主题切换测试

#### 10.1 浅色主题
- [ ] 切换到浅色主题
- [ ] 颜色正确
- [ ] 对比度合适
- [ ] 无显示问题

#### 10.2 深色主题
- [ ] 切换到深色主题
- [ ] 颜色正确
- [ ] 对比度合适
- [ ] 无显示问题

#### 10.3 主题持久化
- [ ] 刷新页面主题保持
- [ ] 重新打开浏览器主题保持

### 十一、性能测试

#### 11.1 加载性能
- [ ] 首页加载时间 < 2 秒
- [ ] 页面切换流畅
- [ ] 无明显卡顿

#### 11.2 大数据量测试
- [ ] 1000+ 封邮件列表流畅
- [ ] 虚拟滚动无卡顿
- [ ] 搜索响应快速

#### 11.3 内存占用
- [ ] 打开开发者工具 Performance
- [ ] 记录内存使用情况
- [ ] 无明显内存泄漏

### 十二、错误处理测试

#### 12.1 网络错误
- [ ] 断开网络连接
- [ ] 显示友好错误提示
- [ ] 提供重试选项
- [ ] 恢复连接后自动重试

#### 12.2 API 错误
- [ ] 模拟 API 错误（停止后端）
- [ ] 显示具体错误信息
- [ ] 不影响其他功能

#### 12.3 表单验证错误
- [ ] 输入无效数据
- [ ] 显示验证错误
- [ ] 错误提示清晰
- [ ] 修正后可提交

### 十三、浏览器兼容性测试

#### 13.1 Chrome
- [ ] 最新版本正常
- [ ] 所有功能可用

#### 13.2 Firefox
- [ ] 最新版本正常
- [ ] 所有功能可用

#### 13.3 Safari
- [ ] 最新版本正常
- [ ] 所有功能可用

#### 13.4 Edge
- [ ] 最新版本正常
- [ ] 所有功能可用

## 测试工具

### 浏览器开发者工具

#### Console（控制台）
```javascript
// 检查是否有错误
// 应该没有红色错误信息
```

#### Network（网络）
```
// 检查 API 请求
// 状态码应该是 200
// 响应时间应该合理
```

#### Performance（性能）
```
// 记录页面加载性能
// 检查是否有性能瓶颈
```

#### Application（应用）
```
// 检查 LocalStorage
// 检查 SessionStorage
// 检查 Cookies
```

### React DevTools

```
// 安装 React DevTools 扩展
// 检查组件树
// 检查组件状态
// 检查性能
```

## 测试数据准备

### 测试账户

建议准备以下类型的测试账户：

1. **Gmail 账户**
   - 用于测试 Gmail API 集成
   - 需要 OAuth2 认证

2. **Outlook 账户**
   - 用于测试 Microsoft Graph API
   - 需要 OAuth2 认证

3. **IMAP 账户**
   - 用于测试通用 IMAP 协议
   - 如 QQ 邮箱、163 邮箱

4. **POP3 账户**
   - 用于测试 POP3 协议
   - 如 QQ 邮箱、163 邮箱

### 测试邮件

准备不同类型的测试邮件：

1. **纯文本邮件**
2. **HTML 邮件**
3. **带附件邮件**
4. **带图片邮件**
5. **长邮件**（测试滚动）
6. **多收件人邮件**

## 测试报告模板

```markdown
# 前端功能测试报告

## 测试信息
- 测试日期：YYYY-MM-DD
- 测试人员：
- 浏览器：Chrome/Firefox/Safari/Edge
- 浏览器版本：

## 测试结果
- 通过：X 项
- 失败：X 项
- 跳过：X 项

## 发现的问题
1. 问题描述
   - 重现步骤
   - 预期结果
   - 实际结果
   - 截图

## 建议
1. 优化建议
2. 功能建议

## 总结
测试总体评价
```

## 注意事项

1. **测试环境**：确保后端服务正常运行
2. **测试数据**：使用测试账户，不要使用真实生产数据
3. **敏感信息**：测试完成后清理测试账户凭证
4. **截图记录**：对关键功能和问题进行截图
5. **详细记录**：记录所有发现的问题和建议

## 快速测试命令

```bash
# 启动开发环境
./scripts/dev-start.sh

# 启动后端
cd backend && go run cmd/server/main.go

# 启动前端
cd frontend && npm run dev

# 构建生产版本
cd frontend && npm run build

# 预览生产版本
cd frontend && npm run preview
```

---

**提示**：建议按照清单顺序逐项测试，确保每个功能都经过验证。发现问题及时记录，便于后续修复和优化。
