# FusionMail 前后端联合测试清单

## 测试环境

- ✅ 后端服务：http://localhost:8080
- ✅ 前端服务：http://localhost:3000
- ✅ 数据库：PostgreSQL (localhost:5432)
- ✅ 缓存：Redis (localhost:6379)

## 核心功能测试

### 1. 系统健康检查

- [ ] 访问 http://localhost:3000 - 前端页面正常加载
- [ ] 访问 http://localhost:8080/api/v1/health - API 健康检查返回 OK
- [ ] 检查浏览器控制台无错误

### 2. 账户管理功能

#### 2.1 添加账户
- [ ] 点击"添加账户"按钮
- [ ] 选择邮箱类型（Gmail/Outlook/IMAP/POP3）
- [ ] 填写账户信息
- [ ] 测试连接成功
- [ ] 保存账户成功
- [ ] 账户列表显示新账户

#### 2.2 查看账户
- [ ] 账户列表正确显示所有账户
- [ ] 账户卡片显示正确信息（邮箱、类型、状态）
- [ ] 同步状态正确显示

#### 2.3 编辑账户
- [ ] 点击账户的编辑按钮
- [ ] 修改账户信息
- [ ] 保存修改成功
- [ ] 账户信息更新正确

#### 2.4 删除账户
- [ ] 点击删除按钮
- [ ] 确认删除对话框显示
- [ ] 确认删除后账户被移除
- [ ] 相关邮件数据被清理

### 3. 邮件管理功能

#### 3.1 邮件列表
- [ ] 邮件列表正确加载
- [ ] 分页功能正常
- [ ] 虚拟滚动流畅（大量邮件时）
- [ ] 邮件项显示正确信息（发件人、主题、时间、预览）

#### 3.2 邮件详情
- [ ] 点击邮件打开详情页
- [ ] 邮件内容正确显示
- [ ] 附件列表正确显示
- [ ] 发件人/收件人信息完整

#### 3.3 邮件操作
- [ ] 标记为已读/未读
- [ ] 添加/移除星标
- [ ] 归档邮件
- [ ] 删除邮件（仅本地）
- [ ] 操作后 UI 立即更新

#### 3.4 邮件搜索
- [ ] 全文搜索功能正常
- [ ] 搜索结果正确
- [ ] 搜索高亮显示
- [ ] 高级筛选（发件人、日期范围、是否已读等）

#### 3.5 邮件统计
- [ ] 未读数显示正确
- [ ] 账户统计信息准确
- [ ] 实时更新统计数据

### 4. 规则引擎功能

#### 4.1 创建规则
- [ ] 点击"创建规则"按钮
- [ ] 填写规则名称和描述
- [ ] 设置触发条件（发件人/主题/正文/附件）
- [ ] 设置执行动作（标记已读/添加标签/归档/Webhook）
- [ ] 保存规则成功

#### 4.2 规则列表
- [ ] 规则列表正确显示
- [ ] 规则状态（启用/禁用）显示正确
- [ ] 规则优先级排序正确

#### 4.3 编辑规则
- [ ] 点击编辑按钮
- [ ] 修改规则条件和动作
- [ ] 保存修改成功

#### 4.4 测试规则
- [ ] 点击"测试规则"按钮
- [ ] 选择测试邮件
- [ ] 测试结果正确显示（匹配/不匹配）

#### 4.5 启用/禁用规则
- [ ] 切换规则状态
- [ ] 状态更新成功
- [ ] 禁用的规则不执行

#### 4.6 删除规则
- [ ] 点击删除按钮
- [ ] 确认删除
- [ ] 规则被移除

#### 4.7 规则自动执行
- [ ] 新邮件到达时自动执行规则
- [ ] 规则按优先级顺序执行
- [ ] 执行结果正确（邮件状态/标签变化）

### 5. Webhook 功能

#### 5.1 创建 Webhook
- [ ] 点击"添加 Webhook"
- [ ] 填写 Webhook URL
- [ ] 选择触发事件
- [ ] 配置请求头和认证
- [ ] 保存成功

#### 5.2 Webhook 列表
- [ ] Webhook 列表正确显示
- [ ] 状态显示正确

#### 5.3 测试 Webhook
- [ ] 点击"测试"按钮
- [ ] 发送测试请求
- [ ] 显示响应结果

#### 5.4 Webhook 日志
- [ ] 查看 Webhook 调用日志
- [ ] 日志包含请求和响应详情
- [ ] 错误日志正确记录

### 6. 同步功能

#### 6.1 手动同步
- [ ] 点击"立即同步"按钮
- [ ] 同步进度显示
- [ ] 同步完成后更新邮件列表
- [ ] 显示同步结果（新邮件数、更新数）

#### 6.2 自动同步
- [ ] 配置同步间隔
- [ ] 自动同步按时执行
- [ ] 同步状态实时更新

#### 6.3 同步日志
- [ ] 查看同步历史
- [ ] 日志包含详细信息（时间、结果、错误）

### 7. 用户界面测试

#### 7.1 响应式设计
- [ ] 桌面端显示正常（1920x1080）
- [ ] 平板端显示正常（768x1024）
- [ ] 移动端显示正常（375x667）

#### 7.2 主题切换
- [ ] 切换到深色模式
- [ ] 切换到浅色模式
- [ ] 主题设置持久化

#### 7.3 交互体验
- [ ] 按钮点击响应快速
- [ ] 加载状态显示清晰
- [ ] 错误提示友好
- [ ] 成功提示及时

### 8. 性能测试

#### 8.1 加载性能
- [ ] 首页加载时间 < 2 秒
- [ ] 邮件列表加载时间 < 2 秒
- [ ] 搜索响应时间 < 2 秒

#### 8.2 大数据量测试
- [ ] 1000+ 封邮件列表流畅
- [ ] 虚拟滚动无卡顿
- [ ] 搜索性能稳定

### 9. 错误处理测试

#### 9.1 网络错误
- [ ] 断开网络连接
- [ ] 显示友好错误提示
- [ ] 恢复连接后自动重试

#### 9.2 API 错误
- [ ] 模拟 API 错误响应
- [ ] 显示具体错误信息
- [ ] 提供重试选项

#### 9.3 数据验证
- [ ] 表单验证正确
- [ ] 必填字段提示
- [ ] 格式验证（邮箱、URL 等）

### 10. 安全性测试

#### 10.1 数据加密
- [ ] 敏感数据（密码、Token）加密存储
- [ ] HTTPS 传输（生产环境）

#### 10.2 权限控制
- [ ] 未授权访问被拦截
- [ ] API 认证正常工作

## 测试结果记录

### 测试环境信息
- 测试日期：2025-10-29
- 测试人员：
- 后端版本：0.1.0
- 前端版本：0.0.0
- 数据库版本：PostgreSQL 15
- Redis 版本：7

### 发现的问题
1. 

### 待优化项
1. 

### 测试结论
- [ ] 所有核心功能正常
- [ ] 性能满足要求
- [ ] 用户体验良好
- [ ] 可以发布测试版本

## 测试命令

### 后端测试
```bash
# 启动后端
cd backend
go run cmd/server/main.go

# 测试 API
curl http://localhost:8080/api/v1/health

# 运行单元测试
go test ./...

# 运行集成测试
go test ./test/integration/...
```

### 前端测试
```bash
# 启动前端
cd frontend
npm run dev

# 构建生产版本
npm run build

# 预览生产版本
npm run preview
```

### 数据库测试
```bash
# 连接数据库
docker exec -it fusionmail-postgres psql -U fusionmail -d fusionmail

# 查看表
\dt

# 查看数据
SELECT * FROM accounts;
SELECT * FROM emails LIMIT 10;
SELECT * FROM email_rules;
```

## 注意事项

1. **测试数据**：使用测试账户，不要使用真实的生产数据
2. **敏感信息**：测试完成后清理测试账户的凭证信息
3. **性能监控**：关注浏览器控制台和网络请求
4. **错误日志**：记录所有错误和异常情况
5. **截图记录**：对关键功能进行截图记录

## 快速测试脚本

```bash
#!/bin/bash

echo "=== FusionMail 快速测试 ==="

# 1. 检查服务状态
echo "1. 检查服务状态..."
curl -s http://localhost:8080/api/v1/health && echo " ✅ 后端服务正常" || echo " ❌ 后端服务异常"
curl -s http://localhost:3000 > /dev/null && echo " ✅ 前端服务正常" || echo " ❌ 前端服务异常"

# 2. 检查数据库
echo "2. 检查数据库..."
docker exec fusionmail-postgres psql -U fusionmail -d fusionmail -c "SELECT 1" > /dev/null && echo " ✅ 数据库连接正常" || echo " ❌ 数据库连接异常"

# 3. 检查 Redis
echo "3. 检查 Redis..."
docker exec fusionmail-redis redis-cli ping > /dev/null && echo " ✅ Redis 连接正常" || echo " ❌ Redis 连接异常"

echo "=== 测试完成 ==="
```
